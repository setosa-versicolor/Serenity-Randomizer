<!DOCTYPE html>
<html lang="en">
<head>
<link rel="apple-touch-icon" href="icon.PNG" sizes="180x180">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Serenity Randomizer</title>
<style>
:root{--bg1:#eaf5ff;--bg2:#f7fbff;--ink:#0f1720;--muted:#5f7281;--brand:#5fb7ff;--brand2:#98e0c8;--card:#ffffffb8;--glass:blur(10px) saturate(120%);--r:18px}
*,*::before,*::after{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji";color:var(--ink);background:radial-gradient(1100px 700px at 20% 10%,#f2f9ff 0%,var(--bg2) 50%,#eef7ff 100%),linear-gradient(180deg,var(--bg1),var(--bg2));-webkit-tap-highlight-color:transparent}
.app{min-height:100dvh;display:grid;grid-template-rows:auto 1fr auto;position:relative;z-index:3}
.topbar{position:sticky;top:0;z-index:10;display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:var(--card);backdrop-filter:var(--glass);border-bottom:1px solid #e8f1fa}
.brand{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.2px}
.brand .dot{width:12px;height:12px;border-radius:50%;background:radial-gradient(circle at 35% 35%,var(--brand),#6fbfff);box-shadow:0 0 0 6px rgba(124,195,255,.25),0 8px 24px rgba(40,73,120,.12)}
.main{display:grid;grid-template-rows:auto 1fr;gap:10px;padding:12px 12px 88px}
.modes{display:flex;gap:8px;overflow:auto;padding-bottom:2px}
.chip{flex:0 0 auto;border:1px solid #dfe9f5;background:#fff;border-radius:999px;padding:10px 14px;font-weight:700;color:#35506a}
.chip[aria-selected="true"]{background:linear-gradient(180deg,#e6f3ff,#d8eeff);border-color:#cfe8ff;box-shadow:inset 0 1px 0 #fff,0 4px 12px rgba(90,140,200,.18)}
.surface{background:var(--card);backdrop-filter:var(--glass);border:1px solid rgba(255,255,255,.7);border-radius:var(--r);box-shadow:0 12px 30px rgba(48,71,94,.10)}
.resultWrap{display:grid;gap:10px}
.result{display:flex;align-items:center;justify-content:center;border-radius:16px;background:#ffffffcc;border:1px solid #eef4fb;min-height:clamp(180px,30vh,260px);font-size:clamp(2.2rem,9vw,3.4rem);font-weight:900;letter-spacing:.3px;text-shadow:0 1px 0 #fff;transition:transform .25s ease,box-shadow .25s ease;margin:10px}
.result.pop{transform:scale(1.02);box-shadow:0 12px 28px rgba(100,140,200,.18)}
.metaRow{display:flex;justify-content:space-between;align-items:center;padding:12px 14px}
.meta{color:var(--muted)}
.controls{padding:10px 12px 14px;display:grid;gap:12px}
.group{display:grid;gap:8px}
.inline{display:flex;gap:8px;flex-wrap:wrap}
label{font-size:.95rem;color:var(--muted)}
input,select,textarea{width:100%;padding:14px;border-radius:14px;border:1px solid #e6eef6;background:#fbfdff;font-size:1.05rem;outline:none;transition:box-shadow .2s,border-color .2s}
textarea{min-height:116px;resize:vertical}
input:focus,select:focus,textarea:focus{border-color:#cfe8ff;box-shadow:0 0 0 3px rgba(124,195,255,.25)}
.kv{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.row{display:flex;gap:10px;align-items:center}
.switch{display:flex;align-items:center;gap:8px}
.switch input{appearance:none;width:50px;height:28px;background:#dfeaf5;border-radius:999px;position:relative;transition:.2s}
.switch input:after{content:"";position:absolute;width:24px;height:24px;top:2px;left:2px;background:#fff;border-radius:50%;transition:.2s}
.switch input:checked{background:#bfe3ff}
.switch input:checked:after{left:24px}
.actions{position:fixed;left:0;right:0;bottom:0;padding:env(safe-area-inset-bottom);z-index:12}
.actionBar{display:flex;gap:8px;padding:10px 12px}
.btn{flex:1;appearance:none;border:none;border-radius:16px;padding:16px 18px;font-weight:800;font-size:1.1rem;box-shadow:0 10px 20px rgba(90,140,200,.18),inset 0 1px 0 rgba(255,255,255,.8)}
.btn.primary{background:linear-gradient(180deg,#bfe3ff,#9fd5ff);border:1px solid #cfe8ff}
.btn.ghost{flex:0 0 auto;background:#fff;border:1px solid #e6eef6;padding:14px 16px}
.historyWrap{padding:8px 12px 14px}
.history{padding:10px;border-radius:12px;background:#ffffffc5;border:1px solid #eef4fb;max-height:28vh;overflow:auto;font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;font-size:1rem}
.history .item{display:flex;justify-content:space-between;border-bottom:1px dashed #e9f1f8;padding:6px 0}
.history .item:last-child{border-bottom:none}
.decor{position:fixed;inset:0;z-index:1;pointer-events:none}
.cloud{position:absolute;top:6vh;opacity:.5;animation:cloud-move linear infinite}
.cloud.c2{top:13vh;opacity:.45;animation-duration:70s}
.cloud.c3{top:18vh;opacity:.4;animation-duration:90s}
.cloud{animation-duration:55s}
@keyframes cloud-move{0%{transform:translateX(-40vw)}100%{transform:translateX(120vw)}}
.palms{position:absolute;bottom:0;left:0;width:100%;height:26vh;display:flex;justify-content:space-between;align-items:flex-end;padding:0 10px}
.palm{width:min(22vw,140px);transform-origin:50% 100%;animation:sway 7s ease-in-out infinite;opacity:.85}
.palm.right{animation-duration:8.2s;opacity:.8}
@keyframes sway{0%,100%{transform:rotate(0deg)}50%{transform:rotate(2deg)}}
.grass{position:absolute;bottom:-2px;left:0;width:100%;height:min(16vh,120px)}
.grass svg{width:100%;height:100%}
.blade{transform-origin:bottom center;animation:blade 6s ease-in-out infinite}
.blade:nth-child(3n){animation-duration:6.7s}
.blade:nth-child(4n){animation-duration:7.4s}
@keyframes blade{0%,100%{transform:rotate(0)}50%{transform:rotate(2.2deg)}}
@media (prefers-reduced-motion:reduce){.cloud,.palm,.blade{animation:none}}
@media (min-width:820px){.main{max-width:800px;margin:0 auto}}
</style>
</head>
<body>
<div class="decor" aria-hidden="true">
  <div class="cloud c1" style="left:-30vw"><svg viewBox="0 0 200 60" width="220" height="66"><path fill="#fff" d="M30 45c-10 0-18-8-18-18S20 9 30 9c6 0 11 3 14 7 5-6 13-10 22-10 15 0 27 10 30 24 10 1 18 9 18 19 0 10-8 18-18 18H30z"/></svg></div>
  <div class="cloud c2" style="left:-55vw"><svg viewBox="0 0 220 70" width="260" height="80"><path fill="#fff" d="M40 55c-12 0-22-10-22-22s10-22 22-22c7 0 13 4 16 8 6-7 15-12 26-12 18 0 31 12 34 28 11 2 19 10 19 20s-9 18-20 18H40z"/></svg></div>
  <div class="cloud c3" style="left:-80vw"><svg viewBox="0 0 240 80" width="300" height="90"><path fill="#fff" d="M50 60c-14 0-26-12-26-26S36 8 50 8c8 0 15 4 19 9 7-8 18-13 31-13 21 0 36 14 39 32 12 2 21 11 21 22s-10 20-22 20H50z"/></svg></div>
  <div class="palms">
    <svg class="palm left" viewBox="0 0 120 200"><defs><linearGradient id="trunk" x1="0" x2="0" y1="0" y2="1"><stop offset="0" stop-color="#9b6b3d"/><stop offset="1" stop-color="#6d4b2b"/></linearGradient></defs><rect x="56" y="60" width="8" height="120" rx="4" fill="url(#trunk)"/><g fill="#3db47a"><path d="M60 60 C20 40, 10 20, 0 10 L10 8 C25 20, 40 35, 60 60 Z"/><path d="M60 60 C40 30, 30 10, 20 0 L30 0 C45 15, 55 35, 60 60 Z"/><path d="M60 60 C100 40, 110 20, 120 10 L110 8 C95 20, 80 35, 60 60 Z"/><path d="M60 60 C80 20, 90 5, 100 0 L90 0 C78 10, 68 30, 60 60 Z"/></g></svg>
    <svg class="palm right" viewBox="0 0 120 200"><defs><linearGradient id="trunk2" x1="0" x2="0" y1="0" y2="1"><stop offset="0" stop-color="#9b6b3d"/><stop offset="1" stop-color="#6d4b2b"/></linearGradient></defs><rect x="56" y="60" width="8" height="120" rx="4" fill="url(#trunk2)"/><g fill="#3db47a"><path d="M60 60 C20 40, 10 20, 0 10 L10 8 C25 20, 40 35, 60 60 Z"/><path d="M60 60 C40 30, 30 10, 20 0 L30 0 C45 15, 55 35, 60 60 Z"/><path d="M60 60 C100 40, 110 20, 120 10 L110 8 C95 20, 80 35, 60 60 Z"/><path d="M60 60 C80 20, 90 5, 100 0 L90 0 C78 10, 68 30, 60 60 Z"/></g></svg>
  </div>
  <div class="grass"><svg preserveAspectRatio="none" viewBox="0 0 1000 200"><rect x="0" y="160" width="1000" height="40" fill="#a9e0c8"/><g fill="#72c39a"><path class="blade" d="M80 200 Q70 120 78 80 Q85 120 86 200"/><path class="blade" d="M140 200 Q130 110 138 70 Q145 115 146 200"/><path class="blade" d="M210 200 Q200 125 208 85 Q216 120 218 200"/><path class="blade" d="M260 200 Q250 118 258 78 Q266 120 268 200"/><path class="blade" d="M330 200 Q320 130 328 90 Q336 125 338 200"/><path class="blade" d="M390 200 Q380 115 388 75 Q396 118 398 200"/><path class="blade" d="M450 200 Q440 130 448 92 Q456 126 458 200"/><path class="blade" d="M520 200 Q510 118 518 78 Q526 120 528 200"/><path class="blade" d="M580 200 Q570 125 578 85 Q586 120 588 200"/><path class="blade" d="M640 200 Q630 130 638 90 Q646 125 648 200"/><path class="blade" d="M700 200 Q690 118 698 78 Q706 120 708 200"/><path class="blade" d="M760 200 Q750 130 758 92 Q766 126 768 200"/><path class="blade" d="M820 200 Q810 125 818 85 Q826 120 828 200"/><path class="blade" d="M880 200 Q870 118 878 78 Q886 120 888 200"/><path class="blade" d="M940 200 Q930 130 938 90 Q946 125 948 200"/></g></svg></div>
</div>
<div class="app">
  <div class="topbar"><div class="brand"><span class="dot"></span>Serenity Randomizer</div><button class="btn ghost" id="copyBtn">Copy</button></div>
  <div class="main">
    <div class="modes" role="tablist" aria-label="Modes">
      <button class="chip" role="tab" aria-selected="true" data-mode="coin">Coin</button>
      <button class="chip" role="tab" aria-selected="false" data-mode="dice">Dice</button>
      <button class="chip" role="tab" aria-selected="false" data-mode="number">Number</button>
      <button class="chip" role="tab" aria-selected="false" data-mode="yesno">Yes/No</button>
      <button class="chip" role="tab" aria-selected="false" data-mode="list">List</button>
    </div>
    <div class="surface resultWrap">
      <div class="metaRow"><div class="meta" id="modeNote">Coin Flip</div><div class="row"><label class="switch"><input id="soundToggle" type="checkbox" checked><span>Sound</span></label><label class="switch"><input id="hapticToggle" type="checkbox"><span>Haptic</span></label></div></div>
      <div class="result" id="result">—</div>
    </div>
    <div class="surface controls">
      <div class="panel coin" data-panel="coin">
        <div class="group kv"><div><label>Heads label</label><input id="coinHeads" type="text" value="Heads"></div><div><label>Tails label</label><input id="coinTails" type="text" value="Tails"></div></div>
        <div class="group" style="max-width:200px"><label>Flips</label><input id="coinCount" type="number" min="1" max="20" value="1"></div>
      </div>
      <div class="panel dice" data-panel="dice" hidden>
        <div class="group kv"><div><label>Die</label><select id="dieType"><option value="4">d4</option><option value="6" selected>d6</option><option value="8">d8</option><option value="10">d10</option><option value="12">d12</option><option value="20">d20</option><option value="custom">Custom</option></select></div><div><label>Dice</label><input id="diceCount" type="number" min="1" max="30" value="1"></div></div>
        <div class="group kv"><div id="customSidesWrap" hidden><label>Custom sides</label><input id="customSides" type="number" min="2" value="6"></div><div class="row" style="align-items:center;gap:12px"><label class="switch"><input id="sumDice" type="checkbox"><span>Show sum</span></label></div></div>
      </div>
      <div class="panel number" data-panel="number" hidden>
        <div class="group kv"><div><label>Min</label><input id="minNum" type="number" value="1"></div><div><label>Max</label><input id="maxNum" type="number" value="100"></div></div>
        <div class="group kv"><div><label>Count</label><input id="numCount" type="number" min="1" max="100" value="1"></div><div class="row" style="align-items:center;gap:12px"><label class="switch"><input id="uniqueNum" type="checkbox"><span>Unique</span></label></div></div>
      </div>
      <div class="panel yesno" data-panel="yesno" hidden>
        <div class="group kv"><div><label>Yes label</label><input id="yesLabel" type="text" value="Yes"></div><div><label>No label</label><input id="noLabel" type="text" value="No"></div></div>
      </div>
      <div class="panel list" data-panel="list" hidden>
        <div class="group"><label>Options (one per line)</label><textarea id="listItems" placeholder="Matcha latte
Lavender tea
Meditation break
Go for a walk"></textarea></div>
        <div class="group kv"><div><label>Pick count</label><input id="listCount" type="number" min="1" value="1"></div><div class="row" style="align-items:center;gap:12px"><label class="switch"><input id="listUnique" type="checkbox" checked><span>Unique</span></label></div></div>
      </div>
      <div class="historyWrap"><div class="history" id="history"></div></div>
    </div>
  </div>
  <div class="actions"><div class="actionBar"><button class="btn primary" id="rollBtn">Roll / Flip / Pick</button><button class="btn ghost" id="clearHistoryBtn">Clear</button></div></div>
</div>
<script>
(()=>{const $=s=>document.querySelector(s),$$=s=>[...document.querySelectorAll(s)];const els={chips:$$('.chip'),modeNote:$('#modeNote'),result:$('#result'),history:$('#history'),copyBtn:$('#copyBtn'),rollBtn:$('#rollBtn'),clearHistoryBtn:$('#clearHistoryBtn'),soundToggle:$('#soundToggle'),hapticToggle:$('#hapticToggle'),customSidesWrap:$('#customSidesWrap'),dieType:$('#dieType'),diceCount:$('#diceCount'),customSides:$('#customSides'),sumDice:$('#sumDice'),coinHeads:$('#coinHeads'),coinTails:$('#coinTails'),coinCount:$('#coinCount'),minNum:$('#minNum'),maxNum:$('#maxNum'),numCount:$('#numCount'),uniqueNum:$('#uniqueNum'),yesLabel:$('#yesLabel'),noLabel:$('#noLabel'),listItems:$('#listItems'),listCount:$('#listCount'),listUnique:$('#listUnique')};let mode='coin';function setMode(m){mode=m;els.chips.forEach(c=>c.setAttribute('aria-selected',String(c.dataset.mode===m)));$$('.panel').forEach(p=>p.hidden=p.dataset.panel!==m);els.modeNote.textContent=({coin:'Coin Flip',dice:'Dice Roll',number:'Number Picker',yesno:'Yes / No',list:'Custom List Picker'})[m]}els.chips.forEach(c=>c.addEventListener('click',()=>{setMode(c.dataset.mode)}));function updateDice(){els.customSidesWrap.hidden=(els.dieType.value!=='custom')}els.dieType?.addEventListener('change',updateDice);updateDice();const randInt=(a,b)=>Math.floor(Math.random()*(b-a+1))+a;function clamp(n,min,max){return Math.max(min,Math.min(max,n))}function drawCoin(){const h=els.coinHeads.value||'Heads',t=els.coinTails.value||'Tails';let n=clamp(parseInt(els.coinCount.value||1),1,20);const out=Array.from({length:n},()=>Math.random()<0.5?h:t);return n===1?out[0]:out.join(' · ')}function drawDice(){let sides=els.dieType.value==='custom'?parseInt(els.customSides.value||6):parseInt(els.dieType.value||6);sides=clamp(sides,2,999999);const n=clamp(parseInt(els.diceCount.value||1),1,30);const rolls=Array.from({length:n},()=>randInt(1,sides));if(els.sumDice.checked&&n>1)return `${rolls.join(' + ')} = ${rolls.reduce((a,b)=>a+b,0)}`;return rolls.join(' · ')}function drawNumber(){let min=parseInt(els.minNum.value||1),max=parseInt(els.maxNum.value||100),count=clamp(parseInt(els.numCount.value||1),1,100);if(max<min)[min,max]=[max,min];const range=max-min+1;if(els.uniqueNum.checked&&count>range)count=range;const set=new Set(),res=[];while(res.length<count){const v=randInt(min,max);if(!els.uniqueNum.checked||!set.has(v)){res.push(v);set.add(v)}}return count===1?String(res[0]):res.join(' · ')}function drawYesNo(){const y=els.yesLabel.value||'Yes',n=els.noLabel.value||'No';return Math.random()<0.5?y:n}function drawList(){const raw=els.listItems.value.split('\n').map(s=>s.trim()).filter(Boolean);if(!raw.length)return '—';let count=clamp(parseInt(els.listCount.value||1),1,raw.length);const unique=els.listUnique.checked,pool=raw.slice(),res=[];for(let i=0;i<count;i++){const idx=randInt(0,pool.length-1);res.push(pool[idx]);if(unique)pool.splice(idx,1)}return count===1?res[0]:res.join(' · ')}function perform(){let out='—';try{if(mode==='coin')out=drawCoin();else if(mode==='dice')out=drawDice();else if(mode==='number')out=drawNumber();else if(mode==='yesno')out=drawYesNo();else if(mode==='list')out=drawList()}catch(_){out='Error'}animate(out);addHistory(mode,out);ping();haptic()}function animate(text){els.result.textContent=text;els.result.classList.remove('pop');requestAnimationFrame(()=>els.result.classList.add('pop'))}function addHistory(m,v){const line=document.createElement('div');line.className='item';const time=new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit',second:'2-digit'});line.innerHTML=`<span>${({coin:'Coin',dice:'Dice',number:'Number',yesno:'Yes/No',list:'List'})[m]} → ${escapeHtml(v)}</span><span class="meta">${time}</span>`;els.history.prepend(line)}function escapeHtml(s){return String(s).replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#039;'}[c]))}let ac=null;function ping(){if(!els.soundToggle.checked)return;try{if(!ac){const C=window.AudioContext||window.webkitAudioContext;if(!C)return;ac=new C()}const t0=ac.currentTime+0.01,o=ac.createOscillator(),g=ac.createGain();o.type='sine';o.frequency.setValueAtTime(660,t0);o.frequency.exponentialRampToValueAtTime(440,t0+0.25);g.gain.setValueAtTime(0.0001,t0);g.gain.exponentialRampToValueAtTime(0.08,t0+0.02);g.gain.exponentialRampToValueAtTime(0.0001,t0+0.35);o.connect(g).connect(ac.destination);o.start(t0);o.stop(t0+0.4);if(ac.state==='suspended')ac.resume().catch(()=>{})}catch(_){}}function haptic(){if(!els.hapticToggle.checked)return;if('vibrate' in navigator){try{navigator.vibrate(12)}catch(_){}}}els.rollBtn.addEventListener('click',perform);els.copyBtn.addEventListener('click',()=>{const txt=els.result.textContent||'';if(navigator.clipboard&&navigator.clipboard.writeText){navigator.clipboard.writeText(txt).then(()=>{els.copyBtn.textContent='Copied';setTimeout(()=>els.copyBtn.textContent='Copy',900)}).catch(()=>{})}});els.clearHistoryBtn.addEventListener('click',()=>els.history.innerHTML='');window.addEventListener('keydown',e=>{if(e.code==='Space'){e.preventDefault();perform()}});setMode('coin')})();
</script>
</body>
</html>
